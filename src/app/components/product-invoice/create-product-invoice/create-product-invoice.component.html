<mat-horizontal-stepper linear="true">
  <mat-step [stepControl]="this.customerForm" label="Seleccionar cliente">
    <form [formGroup]="this.customerForm">
      <mat-form-field appearance="outline">
        <mat-label>Cliente</mat-label>
        <mat-select required formControlName="customerId">
          <mat-option
            *ngFor="let customer of this.customers"
            [value]="customer.id"
          >
            {{ customer.name }} {{ customer.lastname }}
          </mat-option>
        </mat-select>
        <mat-error *ngIf="this.customerForm.controls.customerId.invalid">{{
          getErrorMessage()
        }}</mat-error>
      </mat-form-field>
      <div>
        <button mat-button matStepperNext>Siguiente</button>
      </div>
    </form>
  </mat-step>
  <mat-step label="Seleccionar productos">
    <div class="container-fluid">
      <div class="row">
        <div class="col-sm-8">
          <mat-card class="mt-2">
            <mat-card-header>
              <mat-card-title>Detalle</mat-card-title>
              <mat-card-subtitle
                >Ingrese los productos a facturar</mat-card-subtitle
              >
            </mat-card-header>
            <mat-card-content>
              <div class="table-responsive">
                <table mat-table #tabledetail class="table table-striped"  [dataSource]="this.productsToInvioceDataSource">
                  <ng-container matColumnDef="code">
                    <th mat-header-cell *matHeaderCellDef>Codigo</th>
                    <td mat-cell *matCellDef="let row">{{ row.code }}</td>
                  </ng-container>
                  <ng-container matColumnDef="description">
                    <th mat-header-cell *matHeaderCellDef>Descripcion</th>
                    <td mat-cell *matCellDef="let row">
                      {{ row.description }}
                    </td>
                  </ng-container>
                  <ng-container matColumnDef="price">
                    <th mat-header-cell *matHeaderCellDef>Precio</th>
                    <td mat-cell *matCellDef="let row">{{ row.price }}</td>
                  </ng-container>
                  <ng-container matColumnDef="quantity">
                    <th mat-header-cell *matHeaderCellDef>Cantidad</th>
                    <td mat-cell *matCellDef="let row"><input matInput /></td>
                  </ng-container>
                  <ng-container matColumnDef="Subtotal">
                    <th mat-header-cell *matHeaderCellDef>Subtotal</th>
                    <td mat-cell *matCellDef="let row"></td>
                  </ng-container>
                  <tr
                    mat-header-row
                    *matHeaderRowDef="[
                      'code',
                      'description',
                      'price',
                      'quantity',
                      'Subtotal'
                    ]"
                  ></tr>
                  <tr
                    mat-row
                    (click)="handleProductRowClick(row)"
                    *matRowDef="
                      let row;
                      columns: [
                        'code',
                        'description',
                        'price',
                        'quantity',
                        'Subtotal'
                      ]
                    "
                  ></tr>
                </table>
              </div>
            </mat-card-content>
          </mat-card>
        </div>
        <div class="col-sm-4">
          <mat-card class="mt-2 mat-elevation-z3">
            <mat-card-header>
              <mat-card-title>Productos</mat-card-title>
              <mat-card-subtitle
                >Seleccione el producto que desea facturar</mat-card-subtitle
              >
            </mat-card-header>
            <mat-card-content>
              <div class="table-responsive">
                <table
                  mat-table
                  #table
                  [dataSource]="this.productsDataSource"
                  class="table table-hover"
                >
                  <ng-container matColumnDef="code">
                    <th mat-header-cell *matHeaderCellDef>Codigo</th>
                    <td mat-cell *matCellDef="let row">{{ row.code }}</td>
                  </ng-container>
                  <ng-container matColumnDef="description">
                    <th mat-header-cell *matHeaderCellDef>Descripcion</th>
                    <td mat-cell *matCellDef="let row">
                      {{ row.description }}
                    </td>
                  </ng-container>
                  <ng-container matColumnDef="price">
                    <th mat-header-cell *matHeaderCellDef>Precio</th>
                    <td mat-cell *matCellDef="let row">{{ row.price }}</td>
                  </ng-container>
                  <ng-container matColumnDef="stock">
                    <th mat-header-cell *matHeaderCellDef>Existencia</th>
                    <td mat-cell *matCellDef="let row">{{ row.stock }}</td>
                  </ng-container>
                  <tr
                    mat-header-row
                    *matHeaderRowDef="['code', 'description', 'price', 'stock']"
                  ></tr>
                  <tr
                    mat-row
                    (click)="handleProductRowClick(row)"
                    *matRowDef="
                      let row;
                      columns: ['code', 'description', 'price', 'stock']
                    "
                  ></tr>
                </table>
              </div>
            </mat-card-content>
          </mat-card>
        </div>
      </div>
    </div>
    <div>
      <button mat-button matStepperNext>Siguiente</button>
    </div>
  </mat-step>
  <mat-step>
    <div class="container-fluid">
      <div class="row">
        <div class="col-sm-4">
          <mat-card class="mt-2" style="height: 230px">
            <mat-card-header>
              <mat-card-title>Cliente</mat-card-title>
            </mat-card-header>
            <mat-card-content>
              <div class="d-flex flex-row">
                <label>Nombre:</label>
                <span>Jose Maria Santos</span>
              </div>
              <div class="d-flex flex-row">
                <label>RTN:</label>
                <span>1111-2222-33333333</span>
              </div>
              <div class="d-flex flex-row">
                <label>Fecha:</label>
                <span>13/07/2021</span>
              </div>
            </mat-card-content>
          </mat-card>
        </div>
        <div class="col-sm-4">
          <mat-card class="mt-2" style="height: 230px">
            <mat-card-header>
              <mat-card-title>Resumen</mat-card-title>
            </mat-card-header>
            <mat-card-content>
              <div class="d-flex flex-row">
                <label>SubTotal:</label>
                <span>1000.00</span>
              </div>
              <div class="d-flex flex-row">
                <label>Importe Gravado:</label>
                <span>1000.00</span>
              </div>
              <div class="d-flex flex-row">
                <label>Importe Exento:</label>
                <span>0.00</span>
              </div>
              <div class="d-flex flex-row">
                <label>ISV15%:</label>
                <span>150.00</span>
              </div>
              <div class="d-flex flex-row">
                <label>Total:</label>
                <span>1150.00</span>
              </div>
            </mat-card-content>
          </mat-card>
        </div>
        <div class="col-sm-4">
          <mat-card class="mt-2" style="height: 230px">
            <mat-card-header>
              <mat-card-title>Metodo de pago</mat-card-title>
            </mat-card-header>
            <mat-card-content>
              <label>Metodo de pago</label>
            </mat-card-content>
          </mat-card>
        </div>
      </div>
    </div>
  </mat-step>
</mat-horizontal-stepper>
